#include <cstdio>
#include <iostream>
using namespace std;
typedef long long ll;
const ll mod = 1e9+9;
ll t, n;
char s[4][1000005];
ll f[2][2][1000005];
ll pw[5] = {1, 26, 676, 17576};
int main(){
  scanf("%lld", &t);
  while(t--){
    scanf("%s", s[0]+1);
    scanf("%s", s[1]+1);
    scanf("%s", s[2]+1);
    n = 0;
    while(s[0][n+1] || s[1][n+1] || s[2][n+1])
      n++;
    for(int i = 1;i <= n;i++){
      if(!s[0][i])
        s[0][i] = 'a'-1;
      if(!s[1][i])
        s[1][i] = 'a'-1;
      if(!s[2][i])
        s[2][i] = 'a'-1;
    }
    for(ll i = 0;i <= n+1;i++)
      f[0][0][i] = f[0][1][i] = f[1][0][i] = f[1][1][i] = 0;
    f[0][0][n+1] = 1;
    for(ll i = n;i;i--){
      f[0][0][i] = pw[((s[0][i] == '?') + (s[1][i] == '?') + (s[2][i] == '?'))]*f[0][0][i+1];
      f[0][0][i] %= mod;
      f[0][1][i] = (pw[s[0][i] == '?']*f[0][0][i+1])%mod;
      if(s[1][i] == s[2][i] && s[1][i] == '?'){
        f[0][1][i] *= 325;
      }else if(s[1][i] == '?'){
        f[0][1][i] *= max(0, (s[2][i]-'a'));
      }else if(s[2][i] == '?'){
        f[0][1][i] *= 'z'-s[1][i];
      }else{
        f[0][1][i] *= (s[1][i] < s[2][i]);
      }
      f[0][1][i] %= mod;
      f[0][1][i] += (((s[1][i] == '?' && s[2][i] == '?')?26:(((s[1][i] == '?' || s[2][i] == '?') && ((s[1][i] != 'a'-1 && s[2][i] != 'a'-1))) || s[1][i] == s[2][i]))*pw[s[0][i] == '?'])%mod*f[0][1][i+1];
      f[0][1][i] %= mod;
      f[1][0][i] = (pw[s[2][i] == '?']*f[0][0][i+1])%mod;
      if(s[0][i] == s[1][i] && s[0][i] == '?'){
        f[1][0][i] *= 325;
      }else if(s[0][i] == '?'){
        f[1][0][i] *= max(0, (s[1][i]-'a'));
      }else if(s[1][i] == '?'){
        f[1][0][i] *= 'z'-s[0][i];
      }else{
        f[1][0][i] *= (s[0][i] < s[1][i]);
      }
      f[1][0][i] %= mod;
      f[1][0][i] += (((s[0][i] == '?' && s[1][i] == '?')?26:(((s[0][i] == '?' || s[1][i] == '?') && (s[0][i] != 'a'-1 && s[1][i] != 'a'-1)) || s[0][i] == s[1][i]))*pw[s[2][i] == '?'])%mod*f[1][0][i+1];
      f[1][0][i] %= mod;
      if(s[1][i] == 'a'-1 || s[2][i] == 'a'-1){
        f[1][1][i] = 0;
      }else if(s[0][i] == 'a'-1){
        f[1][1][i] = f[0][1][i];
      }else if(s[1][i] == '?'){
        if(s[0][i] == '?' && s[2][i] == '?'){
          f[1][1][i] = 2600*f[0][0][i+1]+325*(f[0][1][i+1]+f[1][0][i+1])+26*f[1][1][i+1];
        }else if(s[0][i] == '?'){
          f[1][1][i] = (((max(0, (s[2][i]-'a')))*(max(0, (s[2][i]-'a'))-1))/2)*f[0][0][i+1]+(max(0, (s[2][i]-'a')))*(f[0][1][i+1]+f[1][0][i+1])+f[1][1][i+1];
        }else if(s[2][i] == '?'){
          f[1][1][i] = ((('z'-s[0][i])*('z'-s[0][i]-1))/2)*f[0][0][i+1]+('z'-s[0][i])*(f[0][1][i+1]+f[1][0][i+1])+f[1][1][i+1];
        }else{
          if(s[0][i] > s[2][i])
            f[1][1][i] = 0;
          else if(s[0][i] == s[2][i])
            f[1][1][i] = f[1][1][i+1];
          else
            f[1][1][i] = (s[2][i]-s[0][i]-1)*f[0][0][i+1]+f[0][1][i+1]+f[1][0][i+1];
        }
      }else{
        if(s[0][i] == '?' && s[2][i] == '?'){
          f[1][1][i] = (max(0, (s[1][i]-'a')))*('z'-s[1][i])*f[0][0][i+1]+(max(0, (s[1][i]-'a')))*f[0][1][i+1]+('z'-s[1][i])*f[1][0][i+1]+f[1][1][i+1];
        }else if(s[0][i] == '?'){
          if(s[2][i] < s[1][i]){
            f[1][1][i] = 0;
          }else if(s[2][i] == s[1][i]){
            f[1][1][i] = (max(0, (s[1][i]-'a')))*f[0][1][i+1]+f[1][1][i+1];
          }else{
            f[1][1][i] = (max(0, (s[1][i]-'a')))*f[0][0][i+1]+f[1][0][i+1];
          }
        }else if(s[2][i] == '?'){
          if(s[0][i] > s[1][i]){
            f[1][1][i] = 0;
          }else if(s[0][i] == s[1][i]){
            f[1][1][i] = ('z'-s[1][i])*f[1][0][i+1]+f[1][1][i+1];
          }else{
            f[1][1][i] = ('z'-s[1][i])*f[0][0][i+1]+f[0][1][i+1];
          }
        }else{
          if(s[0][i] > s[1][i] || s[1][i] > s[2][i])
            f[1][1][i] = 0;
          else if(s[0][i] < s[1][i] && s[1][i] < s[2][i])
            f[1][1][i] = f[0][0][i+1];
          else if(s[0][i] < s[1][i] && s[1][i] == s[2][i])
            f[1][1][i] = f[0][1][i+1];
          else if(s[0][i] == s[1][i] && s[1][i] < s[2][i])
            f[1][1][i] = f[1][0][i+1];
          else
            f[1][1][i] = f[1][1][i+1];
        }
      }
      f[1][1][i] %= mod;
    }
    printf("%lld\n", f[1][1][1]);
    for(int i = 0;i <= n+3;i++)
      s[0][i] = s[1][i] = s[2][i] = 0;
  }
  return 0;
}
